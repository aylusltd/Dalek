window.Dalek=function(n){function s(){var e=[];for(var t in n){if(t.indexOf("dalek")>-1){e.push(t)}}return e}function o(){return new s}function u(){return null}function a(e){var t={document:["querySelector"],console:["log","error","warn"]};for(var i in t){for(var s=0;s<t[i].length;s++){r=t[i][s];if(n[i][r]==e){return n[i]}}}if(typeof n[e.name]=="function"){return n;for(var o in n){if(n[o][e.name]==e){return n[o]}}}return null}function f(e,t,n,r,i){r=r||10;i=i||1;for(var s in t){if(!e[s]||n){e[s]=t[s];if(typeof t[s]=="object"&&i<=r){i++;f(e[s],t[s],n,r,i)}}}}var r,i=[];id=0;n.findDaleks=n.findDaleks||s;if(n.Dalek){return n.Dalek}else{console=n.console||{error:u,log:u,info:u,dir:u};n.expectedThis=function(t){if(t.expectedThis){return t.expectedThis}else{return a}}(n);n.extend=function(t){if(t.extend){return t.extend}else{return f}}(n);function l(e,r,o){function p(){if(typeof h.id=="number"&&typeof n["dalek"+h.id]=="undefined"&&h.id>1){a.warn("keeping id");a.log(h.id);return h.id}do{if(id+200>Number.MAX_SAFE_INTEGER){id=0}id+=Math.ceil(Math.random()*1e3)}while(i[id]);if(n["dalek"+id]){p()}else{a.warn("setting id");a.log(id);i[id]=h;return id}}function d(e){n["dalek"+e]=h}function v(e){delete n["dalek"+e]}var a={error:this.logLevel>0?console.error.bind(n.console):u,warn:this.logLevel>1?console.warn.bind(n.console):u,log:this.logLevel>2?console.log.bind(n.console):u,dir:this.logLevel>2?console.dir.bind(n.console):u,info:this.logLevel>3?console.info.bind(n.console):u,helpful:this.logLevel>4?console.log.bind(n.console):u,verbose:this.logLevel>5?console.log.bind(n.console):u,bored:this.logLevel>6?console.log.bind(n.console):u};var f=[],l=[],c,h=this;this.running=new s;this.id=p();this.logLevel=typeof o=="number"?o:0;this.halt=function(){if(f)for(var e=0;e<f.length;e++)clearInterval(f[e]);if(l)for(e=0;e<l.length;e++)clearTimeout(l[e]);delete h;delete this};if(typeof e=="object"){n.extend(this,e)}a.bored("71:exterminate");if(typeof e=="function"&&typeof r=="function"){stack=[];function m(e){var t=[];for(var n=0;n<stack.length;n++)t[n]=stack[n];if(typeof e=="function")e(t);return t}this.stack={functions:m()};this.stack.push=function(e,t){if(typeof e=="function")stack.push(e);if(typeof t=="function"){t()}h.stack.functions=m()};this.stack.clear=function(){stack=[]};this.stack.insert=function(e,t){var n,r;if(typeof t=="function"){n=stack.slice(0,e);r=stack.slice(e);stack=Array.prototype.concat(n,[t],r)}};this.stack.replace=function(e,t){var n;if(typeof e=="function")n=stack.indexOf(e);else if(typeof e=="number"&&e<stack.length&&e%1==0){if(e<0&&stack.length+e>=0){n=stack.length+e}else n=e}else n=-1;if(n>-1&&typeof t=="function"){stack[n]=t}else if(typeof e=="function"){a.helpful("couldn't find"+e.name+" it, boss")}else if(typeof e=="number"){if(e>stack.length){a.helpful(e+"is too big");a.bored("moneky")}else{a.helpful("can't parse non-integers");a.bored("What are you some kind of joker?")}}};this.stack.get=m.bind(h);var g=false;this.exterminate=function(e){h.id=p();d(h.id);var r,i;var s=e||h.arguments;if(!(s instanceof Array)&&s){s=[s]};if(stack.length>0){g=true;i=stack.shift();h.functions=m();t=n.expectedThis(i)||h;try{i.apply(t,s)}catch(r){h.error.apply(t,r,s)}h.exterminate(s)}else if(g){g=false;v(h.id);l.push(setTimeout(h.success.call(h),1))}return h};this.success=function(){e.apply(this,[this,arguments])};this.next=function(e){if(typeof e=="function"){var t=n.expectedThis(e)||h;h.success=e.bind(t,Array.prototype.slice.call(arguments,1))}};this.error=function(){r.apply(this,[this,arguments])};function y(e,t,r){var i=t||h.expectedThis||n.expectedThis(e)||h;var s=r||h.arguments;if(!(s instanceof Array)&&s){s=[s]}if(typeof e=="function"){var o=function(){h.id=p();d(h.id);h.results=setTimeout(function(){h.results=e.apply(i,s);h.success(h.results);v(h.id)},1e4)};try{setTimeout(o,1);return h}catch(t){h.error.apply(h,t,s)}}else{a.error("Cannot run %O. %O is not a function",e,e);h.error.apply(h,new Error("invalid function"),s)}}this.run=y;return this}this.success=this.success||u;this.error=this.error||u;return this}return l}}(window)